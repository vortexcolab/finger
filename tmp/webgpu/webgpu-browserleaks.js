!function(){let c=!0,g=[];function v(t){if(void 0!==g[t]){var r=_els("#gpu-adapter td:first-child"),n=_els("#gpu-limits td:first-child"),a=_els("#gpu-features td:first-child"),i=_els("#gpu-formats td:first-child");for(const s of r)c&&(s.id=p(s.innerHTML)),s.nextElementSibling.innerHTML=f(null!=t&&null!=g[t][s.id]?g[t][s.id]:"-");for(const o of n)c&&(o.id=p(o.innerHTML)),o.nextElementSibling.innerHTML=f(null!=t&&null!=g[t][o.id]?g[t][o.id]:"-");let e=!1;(void 0!==g[t].features||0<g[t].features.length)&&(e=!0);for(const l of a)l.nextElementSibling.innerHTML=e&&g[t].features.includes(l.textContent)?ico(1)+"True":ico(0)+"False";for(const u of i)u.nextElementSibling.innerHTML=g[t].formats.includes(u.textContent)?ico(1)+"True":ico(0)+"False";(r=_el("#gpu-swap")).classList.remove("n"),r.addEventListener("click",d),c=!1}}function f(e){return"string"==typeof e&&("-"==e?e="<i>undefined<i>":""==e&&(e="<i>empty<i>")),e}function d(){var e=_el("#gpu-limits"),t=_els("#gpu-adapter td:nth-child(1), #gpu-limits td:nth-child(1)"),r=_el("#gpu-swap");"f"===r.textContent[0]?(Cookies.remove("bl_gpu_raw"),e.classList.remove("wball-640"),t.forEach(function(e){e.title=e.textContent,e.textContent=n(e=e.textContent,1)||(e=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d+)/," $1"))[0].toUpperCase()+e.slice(1)}),r.textContent="raw keys"):(Cookies.set("bl_gpu_raw",1),e.classList.add("wball-640"),t.forEach(function(e){e.title=e.textContent,e.textContent=p(e.textContent)}),r.textContent="format keys")}function p(e){return n(e,0)||e[0].toLowerCase()+e.slice(1).replace(/\s/g,"")}function n(e,t){var r,n=[["getPreferredCanvasFormat","Preferred Canvas Format"]];for(r in n)if(e==n[r][0]||e==n[r][1])return n[r][t];return!1}!async function(){let e=!!navigator.gpu&&"function"==typeof navigator.gpu.requestAdapter,t;var r;t=e?(r=await async function(){try{await navigator.gpu.requestAdapter()}catch(e){return e}return!1}())?(e=!1,ico(0)+r):ico(1)+"True":ico(0)+"False",_el("#gpu-status").innerHTML=t,e&&(_el("#gpu-main").classList.remove("opac"),async function(){var e,t=[{powerPreference:"high-performance"},{powerPreference:"low-power"},{powerPreference:"low-power",forceFallbackAdapter:!0}];for(e in t){var r=await navigator.gpu.requestAdapter(t[e]);if(null!=r&&(g[e]={},r)){if(g[e].name=r.name,g[e].isFallbackAdapter=r.isFallbackAdapter||!1,"function"==typeof navigator.gpu.getPreferredCanvasFormat&&(g[e].getPreferredCanvasFormat=navigator.gpu.getPreferredCanvasFormat()),"function"==typeof r.requestAdapterInfo){var n=await r.requestAdapterInfo();if(n)for(var a in n)g[e][a]=n[a]}if(r.limits)for(var i in r.limits)g[e][i]=r.limits[i];g[e].features=r.features?[...r.features.values()]:[],g[e].formats=await async function(e){var t=await e.requestDevice({requiredFeatures:[...e.features.values()]}),r=[];for(const a of _els("#gpu-formats td:first-child")){var n=a.textContent;await async function(r,n){try{let e=1,t=1;var a;return n.startsWith("bc")||n.startsWith("e")?(e=4,t=4):n.startsWith("astc")&&(a=n.match(/(\d+)x(\d+)/))&&(e=parseInt(a[1],10),t=parseInt(a[2],10)),r.createTexture({size:[e,t],format:n,usage:GPUTextureUsage.SAMPLED|GPUTextureUsage.OUTPUT_ATTACHMENT|GPUTextureUsage.STORAGE|GPUTextureUsage.COPY_SRC|GPUTextureUsage.COPY_DST}),!0}catch(e){return!1}}(t,n)&&r.push(n)}return r}(r)}}g=[...new Set(g.map(JSON.stringify))].map(JSON.parse);{const u=_el(".json-output"),c=_el("textarea",u),f=_el(".more-button"),d=JSON.stringify(g);_el("#gpu-hash").textContent=md5(d),f.classList.remove("n"),f.addEventListener("click",()=>{""===c.textContent&&(c.textContent=d),u.classList.toggle("n")})}var s=g.length?0:null;{var o=s;let e="";if(null==o)e=ico(0)+" No WebGPU adapters found";else for(var l=0;l<g.length;l++)e+=`${0<l?", ":""}<span class="adapter${0===l?" bold":" href"}" id="adapter_${l}">#${l+1} ${g[l].vendor}</span>`;if(_el("#gpu-supported-adapters").innerHTML=e,!o){const p=_els(".adapter");p.forEach(function(e){e.addEventListener("click",function(e){v(e.currentTarget.id.slice(-1)),p.forEach(function(e){e.classList.add("href"),e.classList.remove("bold")}),this.classList.remove("href"),this.classList.add("bold")})})}}v(s)}())}()}();