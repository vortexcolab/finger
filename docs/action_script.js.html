<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: action/script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: action/script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Function to update the entropy bar
/**
 * Description placeholder
 *
 * @param {*} entropy 
 * @param {*} tags 
 */
function updateBarometer(entropy, tags) {
  const indicator = document.getElementById('indicator');
  const entropyLevel = document.getElementById('entropy-level');
  const tagIndicator = document.getElementById('tag');

  // Ensure entropy is between 0 and 100
  const clampedEntropy = Math.min(Math.max(entropy, 0), 50);

  // Update the width of the bar based on entropy
  indicator.style.width = `${clampedEntropy*2}%`;

  // Add animation if entropy is above a threshold
  if (clampedEntropy > 35) {
      indicator.classList.add('animate');
  } else {
      indicator.classList.remove('animate');
  }

  if (clampedEntropy &lt;= 10) {
    indicator.style.background = "linear-gradient(to right, green, greenyellow)";
    entropyLevel.innerHTML = `&lt;span class="secure-tag">Secure&lt;/span> Entropy: ${clampedEntropy} bits`;
  } else if (clampedEntropy &lt;= 25) {
    indicator.style.background = "linear-gradient(to right, greenyellow, yellow, orange)"
    entropyLevel.innerHTML = `&lt;span class="alarm-tag">Alert&lt;/span> Entropy: ${clampedEntropy} bits`;
  } else if (clampedEntropy &lt;= 30) {
    indicator.style.background = "linear-gradient(to right, orange, orangered, red)"
    entropyLevel.innerHTML = `&lt;span class="dangerous-tag">Fingerprinted&lt;/span> Entropy: ${clampedEntropy} bits`;
  } else {
    indicator.style.background = "linear-gradient(to right, red, maroon)"
    entropyLevel.innerHTML = `&lt;span class="infernal-tag">Infernal&lt;/span> Entropy: ${clampedEntropy} bits`;
  }
  // Update the label

  tagIndicator.textContent = '';
  tags.forEach(tag => {
    let tmpElem = document.createElement("span");
    tmpElem.className = "technique-tag";
    tmpElem.textContent = tag
    tagIndicator.appendChild(tmpElem);
  });
}



setInterval(() => {
  // Example: Simulate updates every second
  let currentEntropy = 0;
  /* 
    O problema com esta implementação é que as janelas vão espelhar os dados da janela ativa e last Focused
  */
  chrome.tabs.query({ active: true, currentWindow: true}, function (tabs) {
    let current = tabs[0];
    let url = current.url;
    const hostname = new URL(url).hostname;

    console.log(url);
    // Perform an action, such as sending a message to the content script
    chrome.tabs.sendMessage(current.id, { message: "Give me entropy", url: url }, (response) => {
      console.log("Response from content script:", response);

      updateBarometer(Math.round(Math.log2(response.data.entropy)), response.data.tag);

    });
  });
}, 1000);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#activeTab">activeTab</a></li><li><a href="global.html#addToProxy">addToProxy</a></li><li><a href="global.html#applyConfig">applyConfig</a></li><li><a href="global.html#calculateStatus">calculateStatus</a></li><li><a href="global.html#config">config</a></li><li><a href="global.html#extensionId">extensionId</a></li><li><a href="global.html#fingerstatus">fingerstatus</a></li><li><a href="global.html#interceptAttribute">interceptAttribute</a></li><li><a href="global.html#interceptMethod">interceptMethod</a></li><li><a href="global.html#logLevel">logLevel</a></li><li><a href="global.html#resolvePath">resolvePath</a></li><li><a href="global.html#techniques">techniques</a></li><li><a href="global.html#updateBarometer">updateBarometer</a></li><li><a href="global.html#updateRegisteredInterceptions">updateRegisteredInterceptions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jan 13 2025 16:31:05 GMT+0000 (Western European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
